jQuery(function(t){function e(e,a){t("body").append('<div class = "'+e+' animated fadeIn"><i class = "'+a+' cwpgt-product-more-info-preloader__icon"></i></div>')}var a=!1;t(document).ready(function(){var o,r,s,c,n,i,p,d,l,u,g,m=t(".term-products-wrapper").attr("data-preloader");t(".term-products-wrapper").on("click",".cwpgt-product-actions",function(e){e.preventDefault(),btn=t(this),slide=btn.closest(".cwpgt-product"),0==(o=btn.attr("data-clicked"))?(t(this).addClass("cwpgt-product-actions_active"),t(".cwpgt-button-overlay",slide).css("display","grid"),t(".cwpgt-button-overlay-before_brand",slide).addClass("cwpgt-button-overlay-before_active"),setTimeout(function(){t(".cwpgt-button-overlay-before",slide).addClass("cwpgt-button-overlay-before_active")},50),setTimeout(function(){t(".cwpgt-button-overlay",slide).removeClass("fadeOut").addClass("fadeIn"),t(".cwpgt-button-overlay .button",slide).removeClass("fadeOutUp").addClass("fadeInDown"),btn.attr("data-clicked",1)},1)):(t(this).removeClass("cwpgt-product-actions_active"),t(".cwpgt-button-overlay .button",slide).removeClass("fadeInDown").addClass("fadeOutUp"),t(".cwpgt-button-overlay",slide).removeClass("fadeIn").addClass("fadeOut"),setTimeout(function(){t(".cwpgt-button-overlay-before",slide).removeClass("cwpgt-button-overlay-before_active")},300),setTimeout(function(){t(".cwpgt-button-overlay-before_brand",slide).removeClass("cwpgt-button-overlay-before_active")},350),setTimeout(function(){t(".cwpgt-button-overlay",slide).css("display","none"),btn.attr("data-clicked",0)},1e3))}),t(".term-products-wrapper").on("click",".cwpgt-more-info-button",function(o){o.preventDefault(),a||(a=!0,t(".cwpgt-product-actions").removeClass("cwpgt-product-actions_active"),t(".cwpgt-button-overlay .button",slide).removeClass("fadeInDown").addClass("fadeOutUp"),t(".cwpgt-button-overlay",slide).removeClass("fadeIn").addClass("fadeOut"),setTimeout(function(){t(".cwpgt-button-overlay-before",slide).removeClass("cwpgt-button-overlay-before_active")},300),setTimeout(function(){t(".cwpgt-button-overlay-before_brand",slide).removeClass("cwpgt-button-overlay-before_active")},350),setTimeout(function(){t(".cwpgt-button-overlay",slide).css("display","none"),btn.attr("data-clicked",0)},1e3),e("cwpgt-product-more-info-preloader",m),productId=t(this).attr("data-id"),ajaxData={action:"_cwpgt_show_more",product_id:productId},t.post(cwpAjax.ajaxurl,ajaxData,function(e){switch(e.success){case!0:""!=e.data.product&&t(".button_go-to-product").attr("href",e.data.product),""!=e.data.title&&t(".cwpgt-more-info__title").html(e.data.title),""!=e.data.thumbnail&&t(".cwpgt-more-info-image-wrapper").css("background-image","url("+e.data.thumbnail+")"),""!=e.data.more_images&&(t(".cwpgt-more-info-images").html(e.data.more_images),t(".cwpgt-more-info-images").addClass("owl-carousel owl-theme"),(r=t(".cwpgt-more-info-images")).owlCarousel({autoplay:!1,items:12,loop:!1,margin:0,nav:!0,navText:['<span class = "cwpgt-product-actions__line"></span><span class = "cwpgt-product-actions__line cwpgt-product-actions__line_cross"></span>','<span class = "cwpgt-product-actions__line"></span><span class = "cwpgt-product-actions__line cwpgt-product-actions__line_cross"></span>'],dots:!1,responsive:{0:{items:4},600:{items:8},800:{items:12}}})),""!=e.data.colors&&t(".cwpgt-more-info-colors").html(e.data.colors),""!=e.data.old_price&&t(".cwpgt-more-info-prices__old .cwp-more-info-prices__value").html(e.data.old_price),""!=e.data.new_price&&t(".cwpgt-more-info-prices__new .cwp-more-info-prices__value").html(e.data.new_price),""!=e.data.type&&t(".cwpgt-more-info-type .cwpgt-product__value").html(e.data.type),""!=e.data.material&&t(".cwpgt-more-info-material .cwpgt-product__value").html(e.data.material),""!=e.data.width&&t(".cwpgt-more-info-width .cwpgt-product__value").html(e.data.width),""!=e.data.height&&t(".cwpgt-more-info-height .cwpgt-product__value").html(e.data.height),""!=e.data.depth&&t(".cwpgt-more-info-depth .cwpgt-product__value").html(e.data.depth),""!=e.data.text&&t(".cwpgt-more-info-text .cwpgt-product__value").html(e.data.text),""!=e.data.per_pack&&t(".cwpgt-more-info-number-per-pack .cwpgt-product__value").html(e.data.per_pack),""!=e.data.manufacture&&t(".cwpgt-more-info-manufacture-country .cwpgt-product__value").html(e.data.manufacture),""!=e.data.brand&&t(".cwpgt-more-info-brand-country .cwpgt-product__value").html(e.data.brand),""!=e.data.guarantee&&t(".cwpgt-more-info-guarantee .cwpgt-product__value").html(e.data.guarantee),console.log(e.data.message),t(".cwpgt-product-more-info-preloader").removeClass("fadeIn").addClass("fadeOut"),t(".cwpgt-more-info").removeClass("fadeOutLeft").addClass("fadeInLeft"),t(".cwpgt-more-info-image-wrapper").removeClass("fadeOutRight").addClass("fadeInRight"),t(".cwpgt-more-info-wrapper").css("display","grid"),setTimeout(function(){t(".cwpgt-more-info-wrapper").removeClass("fadeOut").addClass("fadeIn"),t(".cwpgt-more-info-item").removeClass("fadeOut").addClass("fadeIn")},100),setTimeout(function(){t(".cwpgt-product-more-info-preloader").remove()},1e3),a=!1;break;case!1:console.log(e.data.message),a=!1;break;default:console.log("Unknown error!"),a=!1}}))}),t("body").on("click",".close-popup",function(e){e.preventDefault(),t(".cwpgt-more-info").removeClass("fadeInLeft").addClass("fadeOutLeft"),t(".cwpgt-more-info-image-wrapper").removeClass("fadeInRight").addClass("fadeOutRight"),t(".cwpgt-more-info-wrapper").removeClass("fadeIn").addClass("fadeOut"),setTimeout(function(){t(".cwpgt-more-info-wrapper").css("display","none"),t(".cwpgt-more-info-image-wrapper").css("background-image","url()"),t(".cwpgt-more-info-item .cwpgt-product__value").html(""),t(".cwpgt-more-info-images").trigger("destroy.owl.carousel")},1e3)}),t(".cwpgt-more-info-images").on("click",".cwpgt-more-info-image",function(e){e.preventDefault(),t(".cwpgt-more-info-image").removeClass("cwpgt-more-info-image_active"),t(this).addClass("cwpgt-more-info-image_active"),s=t(this).attr("data-src"),t(".cwpgt-more-info-image-wrapper").css("background-image","url("+s+")")}),t(".cwpgt-more-info-colors").on("click",".cwpgt-more-info-colors-item",function(e){e.preventDefault(),t(".cwpgt-more-info-colors-item").removeClass("cwpgt-more-info-colors-item_active"),t(this).addClass("cwpgt-more-info-colors-item_active")}),t(".terms").on("click",".term",function(e){e.preventDefault(),t(".term").removeClass("cwpgt_active"),t(this).addClass("cwpgt_active")}),t(".sorting").on("click",".sort",function(e){e.preventDefault(),t(".sort").removeClass("cwpgt_active"),t(this).addClass("cwpgt_active")}),t(".price-sorting__input").keypress(function(e){if(8!=e.which&&0!=e.which&&(e.which<48||e.which>57))return t(".price-sorting").append('<span class = "sorting-message sorting-message_error">Только цифры!</span>'),setTimeout(function(){t(".sorting-message").remove()},5e3),!1;0!=t(this).val()&&""!=t(this).val()||t(this).val(1)}),t(".price-sorting__input").focusout(function(e){(t(this).val()<=0||""==t(this).val())&&t(this).val(1)}),t(".price-sorting").on("click",".cwpgt-apply-filters",function(o){a||(a=!0,c=t(".term.cwpgt_active").attr("data-term"),n=t(".sort.cwpgt_active").attr("data-sort"),i=t(".price-sorting__input_min").val(),p=t(".price-sorting__input_max").val(),d=t(this),u=parseInt(d.closest(".fw-container").find(".cwpgt-pagination").attr("data-per-page")),e("cwpgt-product-more-info-preloader",m),ajaxData={action:"_cwpgt_apply_filters",products_per_page:u,term:c,sort:n,min:i,max:p},t.post(cwpAjax.ajaxurl,ajaxData,function(e){switch(t(".cwpgt-product-more-info-preloader").removeClass("fadeIn").addClass("fadeOut"),setTimeout(function(){t(".cwpgt-product-more-info-preloader").remove()},1e3),t("span").hasClass("sorting-message")&&t(".sorting-message").remove(),e.success){case!0:""!=e.data.structure&&d.closest(".fw-container").find(".term-products-wrapper").html(e.data.structure),""!=e.data.pagination&&d.closest(".fw-container").find(".cwpgt-pagination").html(e.data.pagination),a=!1;break;case!1:t(".price-sorting").append('<span class = "sorting-message sorting-message_error">'+e.data.message+"</span>"),setTimeout(function(){t(".sorting-message").remove()},5e3),a=!1;break;default:console.log("Unknown error!"),a=!1}}))}),t(".cwpgt-pagination").on("click","a.page-numbers",function(o){o.preventDefault(),a||(a=!0,d=t(this),l=t(".term.cwpgt_active").attr("data-term"),u=parseInt(d.closest(".cwpgt-pagination").attr("data-per-page")),n=t(".sort.cwpgt_active").attr("data-sort"),i=t(".price-sorting__input_min").val(),p=t(".price-sorting__input_max").val(),g=d.hasClass("cwpgt-pagination__previous")?parseInt(d.closest(".cwpgt-pagination").find(".page-numbers.current").html())-1:d.hasClass("cwpgt-pagination__next")?parseInt(d.closest(".cwpgt-pagination").find(".page-numbers.current").html())+1:parseInt(d.html()),e("cwpgt-product-more-info-preloader",m),ajaxData={action:"_cwpgt_pagination_number_click",products_term:l,products_per_page:u,products_current_page:g,sort:n,min:i,max:p},t.post(cwpAjax.ajaxurl,ajaxData,function(e){switch(e.success){case!0:console.log(e.data.message),t(".cwpgt-product-more-info-preloader").removeClass("fadeIn").addClass("fadeOut"),setTimeout(function(){t(".cwpgt-product-more-info-preloader").remove()},1e3),""!=e.data.structure&&t(".term-products-wrapper").html(e.data.structure),""!=e.data.pagination&&t(".cwpgt-pagination").html(e.data.pagination),t("html, body").animate({scrollTop:t(".term-products-wrapper").offset().top},"slow"),a=!1;break;case!1:console.log(e.data.message),t(".cwpgt-product-more-info-preloader").removeClass("fadeIn").addClass("fadeOut"),setTimeout(function(){t(".cwpgt-product-more-info-preloader").remove()},1e3),a=!1}}))})})});