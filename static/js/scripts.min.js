jQuery(function(t){function a(a,e){t("body").append('<div class = "'+a+' animated fadeIn"><i class = "'+e+' product-more-info-preloader__icon"></i></div>')}var e=!1;t(document).ready(function(){var r,s,o,n,i,c,p,d,l=t(".term-products-wrapper").attr("data-preloader");t(".terms").on("click",".term",function(a){a.preventDefault(),t(".term").removeClass("sort_active"),t(this).addClass("sort_active")}),t(".sorting").on("click",".sort",function(a){a.preventDefault(),t(".sort").removeClass("sort_active"),t(this).addClass("sort_active")}),t(".price-sorting__input").keypress(function(a){if(8!=a.which&&0!=a.which&&(a.which<48||a.which>57))return t(".price-sorting").append('<span class = "sorting-message sorting-message_error">Только цифры!</span>'),setTimeout(function(){t(".sorting-message").remove()},5e3),!1;0!=t(this).val()&&""!=t(this).val()||t(this).val(1)}),t(".price-sorting__input").focusout(function(a){(t(this).val()<=0||""==t(this).val())&&t(this).val(1)}),t(".price-sorting").on("click",".apply-filters",function(c){e||(e=!0,r=t(".term.sort_active").attr("data-term"),s=t(".sort.sort_active").attr("data-sort"),o=t(".price-sorting__input_min").val(),n=t(".price-sorting__input_max").val(),i=t(this),p=parseInt(i.closest(".fw-container").find(".pagination").attr("data-per-page")),a("product-more-info-preloader",l),ajaxData={action:"_apply_filters",products_per_page:p,term:r,sort:s,min:o,max:n},t.post(cwpAjax.ajaxurl,ajaxData,function(a){switch(t(".product-more-info-preloader").removeClass("fadeIn").addClass("fadeOut"),setTimeout(function(){t(".product-more-info-preloader").remove()},1e3),t("span").hasClass("sorting-message")&&t(".sorting-message").remove(),a.success){case!0:""!=a.data.structure&&i.closest(".fw-container").find(".term-products-wrapper").html(a.data.structure),""!=a.data.pagination&&i.closest(".fw-container").find(".pagination").html(a.data.pagination),e=!1;break;case!1:t(".price-sorting").append('<span class = "sorting-message sorting-message_error">'+a.data.message+"</span>"),setTimeout(function(){t(".sorting-message").remove()},5e3),e=!1;break;default:console.log("Unknown error!"),e=!1}}))}),t(".pagination").on("click","a.page-numbers",function(r){r.preventDefault(),e||(e=!0,i=t(this),c=t(".term.sort_active").attr("data-term"),p=parseInt(i.closest(".pagination").attr("data-per-page")),s=t(".sort.sort_active").attr("data-sort"),o=t(".price-sorting__input_min").val(),n=t(".price-sorting__input_max").val(),d=i.hasClass("prev")?parseInt(i.closest(".pagination").find(".page-numbers.current").html())-1:i.hasClass("next")?parseInt(i.closest(".pagination").find(".page-numbers.current").html())+1:parseInt(i.html()),a("product-more-info-preloader",l),ajaxData={action:"_pagination_number_click",products_term:c,products_per_page:p,products_current_page:d,sort:s,min:o,max:n},t.post(cwpAjax.ajaxurl,ajaxData,function(a){switch(a.success){case!0:console.log(a.data.message),t(".product-more-info-preloader").removeClass("fadeIn").addClass("fadeOut"),setTimeout(function(){t(".product-more-info-preloader").remove()},1e3),""!=a.data.structure&&t(".term-products-wrapper").html(a.data.structure),""!=a.data.pagination&&t(".pagination").html(a.data.pagination),t("html, body").animate({scrollTop:t(".term-products-wrapper").offset().top},"slow"),e=!1;break;case!1:console.log(a.data.message),t(".product-more-info-preloader").removeClass("fadeIn").addClass("fadeOut"),setTimeout(function(){t(".product-more-info-preloader").remove()},1e3),e=!1}}))})})});